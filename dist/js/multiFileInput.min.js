"use strict";function _createForOfIteratorHelper(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){a=!0,l=e},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw l}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():window.multiFileInput=e()}(function(){var u={maxSize:10485760,maxFiles:4,allowedTypes:["application/pdf","image/jpeg","image/png"],interceptors:null,callback:null,autoInit:!1};function r(e){var t,i,r,n,l,o,a,s,c,d=e&&e.files[0];d&&(s=d,c=u.maxSize,t=s.size<=c?{valid:!0}:{valid:!1,errorMsg:"Document size is more than "+u.maxSize/1024/1024+" MB"},o=d,i="all"===(a=u.allowedTypes)||a.includes(o.type)?{valid:!0}:{valid:!1,errorMsg:"Document type is unsupported"},r=t.valid&&i.valid,n=function(e,t,i,r,n){var l=document.createElement("div");l.innerHTML=i?"<div class='file-wrapper'><div class='file-identifier'><span class='file-name'></span><button class='file-devare'>âœ–</button></div></div>":"<div class='file-wrapper'><div class='file-identifier error'><span class='file-name'></span><button class='file-retry-upload action-btn upload-trigger'>Attach file</button></div><div class='error-msg'></div></div>",l.querySelector(".file-identifier").setAttribute("data-input-id",t),l.querySelector(".file-name").textContent=e.name,r.valid?n.valid||(l.querySelector(".error-msg").textContent=n.errorMsg):l.querySelector(".error-msg").textContent=r.errorMsg;return l.firstChild}(d,e.id,r,t,i),this.querySelector(".file-names").append(n),l=f(e.id),this.querySelector(".file-inputs").append(l),function(e,t){var i=this.querySelectorAll(".file-inputs input"),r=this.querySelectorAll(".file-identifier.error");1<i.length&&(this.querySelector(".initial-upload").classList.add("hidden"),this.querySelector(".add-more-file").classList.remove("hidden"));t||(e.remove(),this.querySelector(".add-more-file").classList.add("hidden"));(t&&1===r.length||!t&&1<r.length)&&r[0].closest(".file-wrapper").remove();t&&i.length>u.maxFiles&&(this.querySelector(".initial-upload").classList.add("hidden"),this.querySelector(".add-more-file").classList.add("hidden"));if(u.callback&&"function"==typeof u.callback)return void u.callback(e)}.call(this,e,r))}function l(e){var t=e.dataset.inputId;e.closest(".file-wrapper").remove(),this.querySelector("#"+t).remove();var i=this.querySelectorAll(".file-inputs input");this.querySelector(".add-more-file").classList.remove("hidden"),1===i.length&&(this.querySelector(".add-more-file").classList.add("hidden"),this.querySelector(".initial-upload").classList.remove("hidden"))}function f(e){var t=document.createElement("div");return t.innerHTML="<input class='file-input' type='file'></input>",t.firstElementChild.id=e.split("input-n-")[0]+"input-n-"+(+e.split("input-n-")[1]+1),t.firstElementChild}function o(){var e=this.querySelectorAll(".file-inputs input");e.length<=u.maxFiles&&e[e.length-1].click()}function t(e){for(var t,i=e.target;i;){if("BUTTON"===i.nodeName&&i.className.includes("upload-trigger")){var r,n=(r=i.closest(".sequential-multi-file-input")).id;if(u.interceptors&&u.interceptors.hasOwnProperty(n)&&"function"==typeof u.interceptors[n])return void u.interceptors[n](function(e){o.call(e)});o.call(r)}else{"BUTTON"===i.nodeName&&i.className.includes("file-devare")&&(r=i.closest(".sequential-multi-file-input"),t=i.closest(".file-identifier"),l.call(r,t))}i=i.parentNode}}function i(e){for(var t,i=e.target;i;){"INPUT"===i.nodeName&&i.className.includes("file-input")&&(t=i.closest(".sequential-multi-file-input"),r.call(t,i)),i=i.parentNode}}function a(e){var t,i;e.querySelector(".interactor")||(t=document.createElement("div"),i=f(e.id+"-input-n-0"),t.innerHTML='<div class="interactor"> <div class="placeholder"> <div class="label"></div> <div class="description"></div> </div> <div class="actions"> <button class="initial-upload action-btn upload-trigger">Upload</button> </div> </div> <div class="file-names"> </div> <button class="add-more-file action-btn upload-trigger hidden">Attach more files</button> <div class="file-inputs"></div>',t.querySelector(".interactor .label").textContent=e.dataset.label||"Upload Documents",t.querySelector(".interactor .description").textContent=e.dataset.description||"",t.querySelector(".file-inputs").append(i),e.innerHTML=t.innerHTML)}function n(e){var t,i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if("childList"===r.type){var n,l=_createForOfIteratorHelper(r.addedNodes);try{for(l.s();!(n=l.n()).done;){var o=n.value;o instanceof HTMLElement&&o.className&&o.className.includes("sequential-multi-file-input")&&a(o)}}catch(e){l.e(e)}finally{l.f()}}}}catch(e){i.e(e)}finally{i.f()}}return{init:function(e){e&&Object.assign(u,e),Array.from(document.querySelectorAll(".sequential-multi-file-input")).forEach(function(e){a(e)}),document.addEventListener("click",t,!1),document.addEventListener("change",i,!1),u.autoInit&&new MutationObserver(n).observe(document.body,{childList:!0,subtree:!0})}}});